/**
 *
 * carbon-angular v0.0.0 | content-switcher.component.js
 *
 * Copyright 2014, 2022 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Input, ContentChildren, QueryList, Output, EventEmitter, HostListener, ElementRef } from "@angular/core";
import { ContentSwitcherOption } from "./content-switcher-option.directive";
import { isFocusInLastItem, isFocusInFirstItem } from "carbon-components-angular/common";
/**
 * The content switcher can be used for toggling between distinct options.
 * Similar to tabs, but without an associated content panel
 *
 * [See demo](../../?path=/story/components-content-switcher--basic)
 *
 * ```html
 * <ibm-content-switcher (selected)="selected($event)">
 *		<button ibmContentOption>First section</button>
 *		<button ibmContentOption>Second section</button>
 *		<button ibmContentOption>Third section</button>
 *	</ibm-content-switcher>
 *	```
 *
 * <example-url>../../iframe.html?id=components-content-switcher--basic</example-url>
 */
var ContentSwitcher = /** @class */ (function () {
    function ContentSwitcher(elementRef) {
        this.elementRef = elementRef;
        this.ariaLabel = "content switcher";
        /**
         * `light` or `dark` content switcher theme
         */
        this.theme = "dark";
        /**
         * Emits the activated `ContentSwitcherOption`
         */
        this.selected = new EventEmitter();
    }
    ContentSwitcher.prototype.ngAfterViewInit = function () {
        var _this = this;
        var firstActive = this.options.find(function (option) { return option.active; });
        // delay setting active until the DOM has settled
        if (!firstActive) {
            setTimeout(function () { return _this.options.first.active = true; });
        }
        // subscribe to each item, emit when one is selected, and reset the active states
        this.options.forEach(function (option) {
            option.selected.subscribe(function (_) {
                var active = option;
                _this.options.forEach(function (option) {
                    if (option !== active) {
                        option.active = false;
                    }
                });
                _this.selected.emit(active);
            });
        });
    };
    ContentSwitcher.prototype.hostkeys = function (event) {
        var buttonList = Array.from(this.elementRef.nativeElement.querySelectorAll("[ibmContentOption]"));
        switch (event.key) {
            case "Right": // IE specific value
            case "ArrowRight":
                event.preventDefault();
                if (!isFocusInLastItem(event, buttonList)) {
                    var index = buttonList.findIndex(function (item) { return item === event.target; });
                    buttonList[index + 1].focus();
                }
                else {
                    buttonList[0].focus();
                }
                break;
            case "Left": // IE specific value
            case "ArrowLeft":
                event.preventDefault();
                if (!isFocusInFirstItem(event, buttonList)) {
                    var index = buttonList.findIndex(function (item) { return item === event.target; });
                    buttonList[index - 1].focus();
                }
                else {
                    buttonList[buttonList.length - 1].focus();
                }
                break;
            case "Home":
                event.preventDefault();
                buttonList[0].focus();
                break;
            case "End":
                event.preventDefault();
                buttonList[buttonList.length - 1].focus();
                break;
        }
    };
    ContentSwitcher.decorators = [
        { type: Component, args: [{
                    selector: "ibm-content-switcher",
                    template: "\n\t\t<div\n\t\t\t[attr.aria-label]=\"ariaLabel\"\n\t\t\tclass=\"bx--content-switcher\"\n\t\t\t[class.bx--content-switcher--light]=\"theme === 'light'\"\n\t\t\trole=\"tablist\">\n\t\t\t<ng-content></ng-content>\n\t\t</div>\n\t"
                }] }
    ];
    /** @nocollapse */
    ContentSwitcher.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    ContentSwitcher.propDecorators = {
        ariaLabel: [{ type: Input }],
        theme: [{ type: Input }],
        selected: [{ type: Output }],
        options: [{ type: ContentChildren, args: [ContentSwitcherOption,] }],
        hostkeys: [{ type: HostListener, args: ["keydown", ["$event"],] }]
    };
    return ContentSwitcher;
}());
export { ContentSwitcher };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC1zd2l0Y2hlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2NvbnRlbnQtc3dpdGNoZXIvIiwic291cmNlcyI6WyJjb250ZW50LXN3aXRjaGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ04sU0FBUyxFQUNULEtBQUssRUFDTCxlQUFlLEVBQ2YsU0FBUyxFQUNULE1BQU0sRUFDTixZQUFZLEVBRVosWUFBWSxFQUNaLFVBQVUsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM1RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUV6Rjs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSDtJQTBCQyx5QkFBc0IsVUFBc0I7UUFBdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQWJuQyxjQUFTLEdBQUcsa0JBQWtCLENBQUM7UUFDeEM7O1dBRUc7UUFDTSxVQUFLLEdBQXFCLE1BQU0sQ0FBQztRQUUxQzs7V0FFRztRQUNPLGFBQVEsR0FBRyxJQUFJLFlBQVksRUFBeUIsQ0FBQztJQUloQixDQUFDO0lBRWhELHlDQUFlLEdBQWY7UUFBQSxpQkFrQkM7UUFqQkEsSUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsTUFBTSxFQUFiLENBQWEsQ0FBQyxDQUFDO1FBQy9ELGlEQUFpRDtRQUNqRCxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ2pCLFVBQVUsQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksRUFBaEMsQ0FBZ0MsQ0FBQyxDQUFDO1NBQ25EO1FBQ0QsaUZBQWlGO1FBQ2pGLElBQUksQ0FBQyxPQUFP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bnQsXG5cdElucHV0LFxuXHRDb250ZW50Q2hpbGRyZW4sXG5cdFF1ZXJ5TGlzdCxcblx0T3V0cHV0LFxuXHRFdmVudEVtaXR0ZXIsXG5cdEFmdGVyVmlld0luaXQsXG5cdEhvc3RMaXN0ZW5lcixcblx0RWxlbWVudFJlZlxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQ29udGVudFN3aXRjaGVyT3B0aW9uIH0gZnJvbSBcIi4vY29udGVudC1zd2l0Y2hlci1vcHRpb24uZGlyZWN0aXZlXCI7XG5pbXBvcnQgeyBpc0ZvY3VzSW5MYXN0SXRlbSwgaXNGb2N1c0luRmlyc3RJdGVtIH0gZnJvbSBcImNhcmJvbi1jb21wb25lbnRzLWFuZ3VsYXIvY29tbW9uXCI7XG5cbi8qKlxuICogVGhlIGNvbnRlbnQgc3dpdGNoZXIgY2FuIGJlIHVzZWQgZm9yIHRvZ2dsaW5nIGJldHdlZW4gZGlzdGluY3Qgb3B0aW9ucy5cbiAqIFNpbWlsYXIgdG8gdGFicywgYnV0IHdpdGhvdXQgYW4gYXNzb2NpYXRlZCBjb250ZW50IHBhbmVsXG4gKlxuICogW1NlZSBkZW1vXSguLi8uLi8/cGF0aD0vc3RvcnkvY29tcG9uZW50cy1jb250ZW50LXN3aXRjaGVyLS1iYXNpYylcbiAqXG4gKiBgYGBodG1sXG4gKiA8aWJtLWNvbnRlbnQtc3dpdGNoZXIgKHNlbGVjdGVkKT1cInNlbGVjdGVkKCRldmVudClcIj5cbiAqXHRcdDxidXR0b24gaWJtQ29udGVudE9wdGlvbj5GaXJzdCBzZWN0aW9uPC9idXR0b24+XG4gKlx0XHQ8YnV0dG9uIGlibUNvbnRlbnRPcHRpb24+U2Vjb25kIHNlY3Rpb248L2J1dHRvbj5cbiAqXHRcdDxidXR0b24gaWJtQ29udGVudE9wdGlvbj5UaGlyZCBzZWN0aW9uPC9idXR0b24+XG4gKlx0PC9pYm0tY29udGVudC1zd2l0Y2hlcj5cbiAqXHRgYGBcbiAqXG4gKiA8ZXhhbXBsZS11cmw+Li4vLi4vaWZyYW1lLmh0bWw/aWQ9Y29tcG9uZW50cy1jb250ZW50LXN3aXRjaGVyLS1iYXNpYzwvZXhhbXBsZS11cmw+XG4gKi9cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogXCJpYm0tY29udGVudC1zd2l0Y2hlclwiLFxuXHR0ZW1wbGF0ZTogYFxuXHRcdDxkaXZcblx0XHRcdFthdHRyLmFyaWEtbGFiZWxdPVwiYXJpYUxhYmVsXCJcblx0XHRcdGNsYXNzPVwiYngtLWNvbnRlbnQtc3dpdGNoZXJcIlxuXHRcdFx0W2NsYXNzLmJ4LS1jb250ZW50LXN3aXRjaGVyLS1saWdodF09XCJ0aGVtZSA9PT0gJ2xpZ2h0J1wiXG5cdFx0XHRyb2xlPVwidGFibGlzdFwiPlxuXHRcdFx0PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuXHRcdDwvZGl2PlxuXHRgXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnRTd2l0Y2hlciBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuXHRASW5wdXQoKSBhcmlhTGFiZWwgPSBcImNvbnRlbnQgc3dpdGNoZXJcIjtcblx0LyoqXG5cdCAqIGBsaWdodGAgb3IgYGRhcmtgIGNvbnRlbnQgc3dpdGNoZXIgdGhlbWVcblx0ICovXG5cdEBJbnB1dCgpIHRoZW1lOiBcImxpZ2h0XCIgfCBcImRhcmtcIiA9IFwiZGFya1wiO1xuXG5cdC8qKlxuXHQgKiBFbWl0cyB0aGUgYWN0aXZhdGVkIGBDb250ZW50U3dpdGNoZXJPcHRpb25gXG5cdCAqL1xuXHRAT3V0cHV0KCkgc2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPENvbnRlbnRTd2l0Y2hlck9wdGlvbj4oKTtcblxuXHRAQ29udGVudENoaWxkcmVuKENvbnRlbnRTd2l0Y2hlck9wdGlvbikgb3B0aW9uczogUXVlcnlMaXN0PENvbnRlbnRTd2l0Y2hlck9wdGlvbj47XG5cblx0Y29uc3RydWN0b3IocHJvdGVjdGVkIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHt9XG5cblx0bmdBZnRlclZpZXdJbml0KCkge1xuXHRcdGNvbnN0IGZpcnN0QWN0aXZlID0gdGhpcy5vcHRpb25zLmZpbmQob3B0aW9uID0+IG9wdGlvbi5hY3RpdmUpO1xuXHRcdC8vIGRlbGF5IHNldHRpbmcgYWN0aXZlIHVudGlsIHRoZSBET00gaGFzIHNldHRsZWRcblx0XHRpZiAoIWZpcnN0QWN0aXZlKSB7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMub3B0aW9ucy5maXJzdC5hY3RpdmUgPSB0cnVlKTtcblx0XHR9XG5cdFx0Ly8gc3Vic2NyaWJlIHRvIGVhY2ggaXRlbSwgZW1pdCB3aGVuIG9uZSBpcyBzZWxlY3RlZCwgYW5kIHJlc2V0IHRoZSBhY3RpdmUgc3RhdGVzXG5cdFx0dGhpcy5vcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcblx0XHRcdG9wdGlvbi5zZWxlY3RlZC5zdWJzY3JpYmUoKF86IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Y29uc3QgYWN0aXZlID0gb3B0aW9uO1xuXHRcdFx0XHR0aGlzLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuXHRcdFx0XHRcdGlmIChvcHRpb24gIT09IGFjdGl2ZSkge1xuXHRcdFx0XHRcdFx0b3B0aW9uLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWQuZW1pdChhY3RpdmUpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRASG9zdExpc3RlbmVyKFwia2V5ZG93blwiLCBbXCIkZXZlbnRcIl0pXG5cdGhvc3RrZXlzKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0Y29uc3QgYnV0dG9uTGlzdCA9IEFycmF5LmZyb208YW55Pih0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2libUNvbnRlbnRPcHRpb25dXCIpKTtcblxuXHRcdHN3aXRjaCAoZXZlbnQua2V5KSB7XG5cdFx0XHRjYXNlIFwiUmlnaHRcIjogLy8gSUUgc3BlY2lmaWMgdmFsdWVcblx0XHRcdGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGlmICghaXNGb2N1c0luTGFzdEl0ZW0oZXZlbnQsIGJ1dHRvbkxpc3QpKSAge1xuXHRcdFx0XHRcdGNvbnN0IGluZGV4ID0gYnV0dG9uTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09PSBldmVudC50YXJnZXQpO1xuXHRcdFx0XHRcdGJ1dHRvbkxpc3RbaW5kZXggKyAxXS5mb2N1cygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJ1dHRvbkxpc3RbMF0uZm9jdXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcIkxlZnRcIjogLy8gSUUgc3BlY2lmaWMgdmFsdWVcblx0XHRcdGNhc2UgXCJBcnJvd0xlZnRcIjpcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0aWYgKCFpc0ZvY3VzSW5GaXJzdEl0ZW0oZXZlbnQsIGJ1dHRvbkxpc3QpKSAge1xuXHRcdFx0XHRcdGNvbnN0IGluZGV4ID0gYnV0dG9uTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09PSBldmVudC50YXJnZXQpO1xuXHRcdFx0XHRcdGJ1dHRvbkxpc3RbaW5kZXggLSAxXS5mb2N1cygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJ1dHRvbkxpc3RbYnV0dG9uTGlzdC5sZW5ndGggLSAxXS5mb2N1cygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFwiSG9tZVwiOlxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRidXR0b25MaXN0WzBdLmZvY3VzKCk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFwiRW5kXCI6XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGJ1dHRvbkxpc3RbYnV0dG9uTGlzdC5sZW5ndGggLSAxXS5mb2N1cygpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH1cbn1cbiJdfQ==