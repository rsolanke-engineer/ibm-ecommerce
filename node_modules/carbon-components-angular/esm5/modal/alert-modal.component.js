/**
 *
 * carbon-angular v0.0.0 | alert-modal.component.js
 *
 * Copyright 2014, 2022 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import * as tslib_1 from "tslib";
import { Component, Inject, ViewChild, Optional } from "@angular/core";
import { BaseModal } from "./base-modal.class";
/**
 * Component to create standard modals for presenting content or asking for user's input.
 * It can show as a passive modal showing only text or show as a transactional modal with
 * multiple buttons for different actions for the user to choose from.
 *
 * Using a modal in your application requires `ibm-placeholder` which would generally be
 * placed near the end of your app component template (app.component.ts or app.component.html) as:
 *
 * ```html
 * <ibm-placeholder></ibm-placeholder>
 * ```
 *
 * Example of opening the modal:
 *
 * ```typescript
 * \@Component({
 *  selector: "app-modal-demo",
 *  template: `
 *   <button class="btn--primary" (click)="openModal()">Open modal</button>
 *   <ibm-placeholder></ibm-placeholder>`
 * })
 * export class ModalDemo {
 * 	openModal() {
 * 		this.modalService.show({
 *			modalType: "default",
 *			label: "optional header text",
 *			title: "Modal title",
 *			text: "Modal text",
 *			buttons: [{
 *				text: "Button text",
 *				type: "primary",
 *				click: clickFunction
 *			}]
 *		});
 * 	}
 * }
 * ```
 */
var AlertModal = /** @class */ (function (_super) {
    tslib_1.__extends(AlertModal, _super);
    /**
     * Creates an instance of `AlertModal`.
     */
    function AlertModal(type, label, title, content, size, hasScrollingContent, buttons, onClose, showCloseButton) {
        if (type === void 0) { type = "default"; }
        if (hasScrollingContent === void 0) { hasScrollingContent = null; }
        if (buttons === void 0) { buttons = []; }
        if (showCloseButton === void 0) { showCloseButton = true; }
        var _this = _super.call(this) || this;
        _this.type = type;
        _this.label = label;
        _this.title = title;
        _this.content = content;
        _this.size = size;
        _this.hasScrollingContent = hasScrollingContent;
        _this.buttons = buttons;
        _this.onClose = onClose;
        _this.showCloseButton = showCloseButton;
        for (var i = 0; i < _this.buttons.length; i++) {
            var button = _this.buttons[i];
            if (!button.id) {
                button.id = "alert-modal-button-" + i;
            }
            if (!button.type) {
                button.type = "secondary";
            }
        }
        return _this;
    }
    AlertModal.prototype.ngAfterViewInit = function () {
        if (!this.modalContent) {
            return false;
        }
        var element = this.modalContent.nativeElement;
        if (element.scrollHeight > element.clientHeight) {
            element.tabIndex = 0;
        }
        else {
            element.tabIndex = -1;
        }
    };
    AlertModal.prototype.buttonClicked = function (buttonIndex) {
        var button = this.buttons[buttonIndex];
        if (button.click) {
            button.click();
        }
        this.closeModal();
    };
    AlertModal.prototype.dismissModal = function (trigger) {
        if (this.onClose && this.onClose(trigger) === false) {
            return;
        }
        this.closeModal();
    };
    AlertModal.decorators = [
        { type: Component, args: [{
                    selector: "ibm-alert-modal",
                    template: "\n\t\t<ibm-modal\n\t\t\t[size]=\"size\"\n\t\t\t[theme]=\"type\"\n\t\t\t[ariaLabel]=\"title\"\n\t\t\t[hasScrollingContent]=\"hasScrollingContent\"\n\t\t\t[open]=\"open\"\n\t\t\t(overlaySelected)=\"dismissModal('overlay')\">\n\t\t\t<ibm-modal-header (closeSelect)=\"dismissModal('close')\" [showCloseButton]=\"showCloseButton\">\n\t\t\t\t<p ibmModalHeaderLabel class=\"bx--type-delta\">{{label}}</p>\n\t\t\t\t<p ibmModalHeaderHeading class=\"bx--type-beta\">{{title}}</p>\n\t\t\t</ibm-modal-header>\n\t\t\t<div ibmModalContent #modalContent>\n\t\t\t\t<p [innerHTML]=\"content\"></p>\n\t\t\t</div>\n\t\t\t<ibm-modal-footer *ngIf=\"buttons.length > 0\">\n\t\t\t\t<ng-container *ngFor=\"let button of buttons; let i = index\">\n\t\t\t\t\t<button\n\t\t\t\t\t\t[ibmButton]=\"button.type\"\n\t\t\t\t\t\t(click)=\"buttonClicked(i)\"\n\t\t\t\t\t\t[id]=\"button.id\"\n\t\t\t\t\t\t[attr.modal-primary-focus]=\"(button.type.indexOf('primary') !== -1 ? '' : null)\">\n\t\t\t\t\t\t{{button.text}}\n\t\t\t\t\t</button>\n\t\t\t\t</ng-container>\n\t\t\t</ibm-modal-footer>\n\t\t</ibm-modal>\n\t"
                }] }
    ];
    /** @nocollapse */
    AlertModal.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: ["type",] }] },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["label",] }] },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["title",] }] },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["content",] }] },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["size",] }] },
        { type: Boolean, decorators: [{ type: Optional }, { type: Inject, args: ["hasScrollingContent",] }] },
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: ["buttons",] }] },
        { type: Function, decorators: [{ type: Optional }, { type: Inject, args: ["close",] }] },
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: ["showCloseButton",] }] }
    ]; };
    AlertModal.propDecorators = {
        modalContent: [{ type: ViewChild, args: ["modalContent", { static: true },] }]
    };
    return AlertModal;
}(BaseModal));
export { AlertModal };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxlcnQtbW9kYWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vY2FyYm9uLWNvbXBvbmVudHMtYW5ndWxhci9tb2RhbC8iLCJzb3VyY2VzIjpbImFsZXJ0LW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNOLFNBQVMsRUFDVCxNQUFNLEVBQ04sU0FBUyxFQUVULFFBQVEsRUFDUixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFL0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQ0c7QUFDSDtJQStCZ0Msc0NBQVM7SUFHeEM7O09BRUc7SUFDSCxvQkFDb0MsSUFBZ0IsRUFDZixLQUFhLEVBQ2IsS0FBYSxFQUNYLE9BQWUsRUFDbEIsSUFBWSxFQUNHLG1CQUFtQyxFQUMvQyxPQUFZLEVBQ2QsT0FBaUIsRUFDUCxlQUFzQjtRQVJqQyxxQkFBQSxFQUFBLGdCQUFnQjtRQUtELG9DQUFBLEVBQUEsMEJBQW1DO1FBQy9DLHdCQUFBLEVBQUEsWUFBWTtRQUVKLGdDQUFBLEVBQUEsc0JBQXNCO1FBVHJFLFlBV0MsaUJBQU8sU0FVUDtRQXBCbUMsVUFBSSxHQUFKLElBQUksQ0FBWTtRQUNmLFdBQUssR0FBTCxLQUFLLENBQVE7UUFDYixXQUFLLEdBQUwsS0FBSyxDQUFRO1FBQ1gsYUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNsQixVQUFJLEdBQUosSUFBSSxDQUFRO1FBQ0cseUJBQW1CLEdBQW5CLG1CQUFtQixDQUFnQjtRQUMvQyxhQUFPLEdBQVAsT0FBTyxDQUFLO1FBQ2QsYUFBTyxHQUFQLE9BQU8sQ0FBVTtRQUNQLHFCQUFlLEdBQWYsZUFBZSxDQUFPO1FBR3BFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM3QyxJQUFNLE1BQU0sR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO2dCQUNmLE1BQU0sQ0FBQyxFQUFFLEdBQUcsd0JBQXNCLENBQUcsQ0FBQzthQUN0QztZQUNELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFO2dCQUNqQixNQUFNLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQzthQUMxQjtTQUNEOztJQUNGLENBQUM7SUFFRCxvQ0FBZSxHQUFmO1FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFBRSxPQUFPLEtBQUssQ0FBQztTQUFFO1FBQ3pDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDO1FBQ2hELElBQUksT0FBTyxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxFQUFFO1lBQ2hELE9BQU8sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO1NBQ3JCO2FBQU07WUFDTixPQUFPLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3RCO0lBQ0YsQ0FBQztJQUVELGtDQUFhLEdBQWIsVUFBYyxXQUFXO1FBQ3hCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDekMsSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO1lBQ2pCLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNmO1FBRUQsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFFRCxpQ0FBWSxHQUFaLFVBQWEsT0FBTztRQUNuQixJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxLQUFLLEVBQUU7WUFDcEQsT0FBTztTQUNQO1FBQ0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ25CLENBQUM7O2dCQXBGRCxTQUFTLFNBQUM7b0JBQ1YsUUFBUSxFQUFFLGlCQUFpQjtvQkFDM0IsUUFBUSxFQUFFLHNqQ0EyQlQ7aUJBQ0Q7Ozs7Z0RBUUUsUUFBUSxZQUFJLE1BQU0sU0FBQyxNQUFNOzZDQUN6QixRQUFRLFlBQUksTUFBTSxTQUFDLE9BQU87NkNBQzFCLFFBQVEsWUFBSSxNQUFNLFNBQUMsT0FBTzs2Q0FDMUIsUUFBUSxZQUFJLE1BQU0sU0FBQyxTQUFTOzZDQUM1QixRQUFRLFlBQUksTUFBTSxTQUFDLE1BQU07OENBQ3pCLFFBQVEsWUFBSSxNQUFNLFNBQUMscUJBQXFCO2dEQUN4QyxRQUFRLFlBQUksTUFBTSxTQUFDLFNBQVM7Z0JBQ2dCLFFBQVEsdUJBQXBELFFBQVEsWUFBSSxNQUFNLFNBQUMsT0FBTztnREFDMUIsUUFBUSxZQUFJLE1BQU0sU0FBQyxpQkFBaUI7OzsrQkFickMsU0FBUyxTQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7O0lBb0Q1QyxpQkFBQztDQUFBLEFBckZELENBK0JnQyxTQUFTLEdBc0R4QztTQXREWSxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcblx0Q29tcG9uZW50LFxuXHRJbmplY3QsXG5cdFZpZXdDaGlsZCxcblx0QWZ0ZXJWaWV3SW5pdCxcblx0T3B0aW9uYWxcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IEJhc2VNb2RhbCB9IGZyb20gXCIuL2Jhc2UtbW9kYWwuY2xhc3NcIjtcblxuLyoqXG4gKiBDb21wb25lbnQgdG8gY3JlYXRlIHN0YW5kYXJkIG1vZGFscyBmb3IgcHJlc2VudGluZyBjb250ZW50IG9yIGFza2luZyBmb3IgdXNlcidzIGlucHV0LlxuICogSXQgY2FuIHNob3cgYXMgYSBwYXNzaXZlIG1vZGFsIHNob3dpbmcgb25seSB0ZXh0IG9yIHNob3cgYXMgYSB0cmFuc2FjdGlvbmFsIG1vZGFsIHdpdGhcbiAqIG11bHRpcGxlIGJ1dHRvbnMgZm9yIGRpZmZlcmVudCBhY3Rpb25zIGZvciB0aGUgdXNlciB0byBjaG9vc2UgZnJvbS5cbiAqXG4gKiBVc2luZyBhIG1vZGFsIGluIHlvdXIgYXBwbGljYXRpb24gcmVxdWlyZXMgYGlibS1wbGFjZWhvbGRlcmAgd2hpY2ggd291bGQgZ2VuZXJhbGx5IGJlXG4gKiBwbGFjZWQgbmVhciB0aGUgZW5kIG9mIHlvdXIgYXBwIGNvbXBvbmVudCB0ZW1wbGF0ZSAoYXBwLmNvbXBvbmVudC50cyBvciBhcHAuY29tcG9uZW50Lmh0bWwpIGFzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxpYm0tcGxhY2Vob2xkZXI+PC9pYm0tcGxhY2Vob2xkZXI+XG4gKiBgYGBcbiAqXG4gKiBFeGFtcGxlIG9mIG9wZW5pbmcgdGhlIG1vZGFsOlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIFxcQENvbXBvbmVudCh7XG4gKiAgc2VsZWN0b3I6IFwiYXBwLW1vZGFsLWRlbW9cIixcbiAqICB0ZW1wbGF0ZTogYFxuICogICA8YnV0dG9uIGNsYXNzPVwiYnRuLS1wcmltYXJ5XCIgKGNsaWNrKT1cIm9wZW5Nb2RhbCgpXCI+T3BlbiBtb2RhbDwvYnV0dG9uPlxuICogICA8aWJtLXBsYWNlaG9sZGVyPjwvaWJtLXBsYWNlaG9sZGVyPmBcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgTW9kYWxEZW1vIHtcbiAqIFx0b3Blbk1vZGFsKCkge1xuICogXHRcdHRoaXMubW9kYWxTZXJ2aWNlLnNob3coe1xuICpcdFx0XHRtb2RhbFR5cGU6IFwiZGVmYXVsdFwiLFxuICpcdFx0XHRsYWJlbDogXCJvcHRpb25hbCBoZWFkZXIgdGV4dFwiLFxuICpcdFx0XHR0aXRsZTogXCJNb2RhbCB0aXRsZVwiLFxuICpcdFx0XHR0ZXh0OiBcIk1vZGFsIHRleHRcIixcbiAqXHRcdFx0YnV0dG9uczogW3tcbiAqXHRcdFx0XHR0ZXh0OiBcIkJ1dHRvbiB0ZXh0XCIsXG4gKlx0XHRcdFx0dHlwZTogXCJwcmltYXJ5XCIsXG4gKlx0XHRcdFx0Y2xpY2s6IGNsaWNrRnVuY3Rpb25cbiAqXHRcdFx0fV1cbiAqXHRcdH0pO1xuICogXHR9XG4gKiB9XG4gKiBgYGBcbiAqL1xuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiBcImlibS1hbGVydC1tb2RhbFwiLFxuXHR0ZW1wbGF0ZTogYFxuXHRcdDxpYm0tbW9kYWxcblx0XHRcdFtzaXplXT1cInNpemVcIlxuXHRcdFx0W3RoZW1lXT1cInR5cGVcIlxuXHRcdFx0W2FyaWFMYWJlbF09XCJ0aXRsZVwiXG5cdFx0XHRbaGFzU2Nyb2xsaW5nQ29udGVudF09XCJoYXNTY3JvbGxpbmdDb250ZW50XCJcblx0XHRcdFtvcGVuXT1cIm9wZW5cIlxuXHRcdFx0KG92ZXJsYXlTZWxlY3RlZCk9XCJkaXNtaXNzTW9kYWwoJ292ZXJsYXknKVwiPlxuXHRcdFx0PGlibS1tb2RhbC1oZWFkZXIgKGNsb3NlU2VsZWN0KT1cImRpc21pc3NNb2RhbCgnY2xvc2UnKVwiIFtzaG93Q2xvc2VCdXR0b25dPVwic2hvd0Nsb3NlQnV0dG9uXCI+XG5cdFx0XHRcdDxwIGlibU1vZGFsSGVhZGVyTGFiZWwgY2xhc3M9XCJieC0tdHlwZS1kZWx0YVwiPnt7bGFiZWx9fTwvcD5cblx0XHRcdFx0PHAgaWJtTW9kYWxIZWFkZXJIZWFkaW5nIGNsYXNzPVwiYngtLXR5cGUtYmV0YVwiPnt7dGl0bGV9fTwvcD5cblx0XHRcdDwvaWJtLW1vZGFsLWhlYWRlcj5cblx0XHRcdDxkaXYgaWJtTW9kYWxDb250ZW50ICNtb2RhbENvbnRlbnQ+XG5cdFx0XHRcdDxwIFtpbm5lckhUTUxdPVwiY29udGVudFwiPjwvcD5cblx0XHRcdDwvZGl2PlxuXHRcdFx0PGlibS1tb2RhbC1mb290ZXIgKm5nSWY9XCJidXR0b25zLmxlbmd0aCA+IDBcIj5cblx0XHRcdFx0PG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgYnV0dG9uIG9mIGJ1dHRvbnM7IGxldCBpID0gaW5kZXhcIj5cblx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRbaWJtQnV0dG9uXT1cImJ1dHRvbi50eXBlXCJcblx0XHRcdFx0XHRcdChjbGljayk9XCJidXR0b25DbGlja2VkKGkpXCJcblx0XHRcdFx0XHRcdFtpZF09XCJidXR0b24uaWRcIlxuXHRcdFx0XHRcdFx0W2F0dHIubW9kYWwtcHJpbWFyeS1mb2N1c109XCIoYnV0dG9uLnR5cGUuaW5kZXhPZigncHJpbWFyeScpICE9PSAtMSA/ICcnIDogbnVsbClcIj5cblx0XHRcdFx0XHRcdHt7YnV0dG9uLnRleHR9fVxuXHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHRcdDwvaWJtLW1vZGFsLWZvb3Rlcj5cblx0XHQ8L2libS1tb2RhbD5cblx0YFxufSlcbmV4cG9ydCBjbGFzcyBBbGVydE1vZGFsIGV4dGVuZHMgQmFzZU1vZGFsIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG5cdC8vIEB0cy1pZ25vcmVcblx0QFZpZXdDaGlsZChcIm1vZGFsQ29udGVudFwiLCB7IHN0YXRpYzogdHJ1ZSB9KSBtb2RhbENvbnRlbnQ7XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBBbGVydE1vZGFsYC5cblx0ICovXG5cdGNvbnN0cnVjdG9yKFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJ0eXBlXCIpIHB1YmxpYyB0eXBlID0gXCJkZWZhdWx0XCIsXG5cdFx0QE9wdGlvbmFsKCkgQEluamVjdChcImxhYmVsXCIpIHB1YmxpYyBsYWJlbDogc3RyaW5nLFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJ0aXRsZVwiKSBwdWJsaWMgdGl0bGU6IHN0cmluZyxcblx0XHRAT3B0aW9uYWwoKSBASW5qZWN0KFwiY29udGVudFwiKSBwdWJsaWMgY29udGVudDogc3RyaW5nLFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJzaXplXCIpIHB1YmxpYyBzaXplOiBzdHJpbmcsXG5cdFx0QE9wdGlvbmFsKCkgQEluamVjdChcImhhc1Njcm9sbGluZ0NvbnRlbnRcIikgcHVibGljIGhhc1Njcm9sbGluZ0NvbnRlbnQ6IGJvb2xlYW4gPSBudWxsLFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJidXR0b25zXCIpIHB1YmxpYyBidXR0b25zID0gW10sXG5cdFx0QE9wdGlvbmFsKCkgQEluamVjdChcImNsb3NlXCIpIHB1YmxpYyBvbkNsb3NlOiBGdW5jdGlvbixcblx0XHRAT3B0aW9uYWwoKSBASW5qZWN0KFwic2hvd0Nsb3NlQnV0dG9uXCIpIHB1YmxpYyBzaG93Q2xvc2VCdXR0b24gPSB0cnVlXG5cdCkge1xuXHRcdHN1cGVyKCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGJ1dHRvbiA9IHRoaXMuYnV0dG9uc1tpXTtcblx0XHRcdGlmICghYnV0dG9uLmlkKSB7XG5cdFx0XHRcdGJ1dHRvbi5pZCA9IGBhbGVydC1tb2RhbC1idXR0b24tJHtpfWA7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWJ1dHRvbi50eXBlKSB7XG5cdFx0XHRcdGJ1dHRvbi50eXBlID0gXCJzZWNvbmRhcnlcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRuZ0FmdGVyVmlld0luaXQoKSB7XG5cdFx0aWYgKCF0aGlzLm1vZGFsQ29udGVudCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRjb25zdCBlbGVtZW50ID0gdGhpcy5tb2RhbENvbnRlbnQubmF0aXZlRWxlbWVudDtcblx0XHRpZiAoZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBlbGVtZW50LmNsaWVudEhlaWdodCkge1xuXHRcdFx0ZWxlbWVudC50YWJJbmRleCA9IDA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW1lbnQudGFiSW5kZXggPSAtMTtcblx0XHR9XG5cdH1cblxuXHRidXR0b25DbGlja2VkKGJ1dHRvbkluZGV4KSB7XG5cdFx0Y29uc3QgYnV0dG9uID0gdGhpcy5idXR0b25zW2J1dHRvbkluZGV4XTtcblx0XHRpZiAoYnV0dG9uLmNsaWNrKSB7XG5cdFx0XHRidXR0b24uY2xpY2soKTtcblx0XHR9XG5cblx0XHR0aGlzLmNsb3NlTW9kYWwoKTtcblx0fVxuXG5cdGRpc21pc3NNb2RhbCh0cmlnZ2VyKSB7XG5cdFx0aWYgKHRoaXMub25DbG9zZSAmJiB0aGlzLm9uQ2xvc2UodHJpZ2dlcikgPT09IGZhbHNlKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuY2xvc2VNb2RhbCgpO1xuXHR9XG59XG4iXX0=