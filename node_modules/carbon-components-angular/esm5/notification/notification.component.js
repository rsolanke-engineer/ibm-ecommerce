/**
 *
 * carbon-angular v0.0.0 | notification.component.js
 *
 * Copyright 2014, 2022 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Input, Output, EventEmitter, ViewChild, HostBinding } from "@angular/core";
import { I18n } from "carbon-components-angular/i18n";
import { NotificationDisplayService } from "./notification-display.service";
import { of, isObservable } from "rxjs";
/**
 * Notification messages are displayed toward the top of the UI and do not interrupt userâ€™s work.
 *
 * [See demo](../../?path=/story/components-notification--basic)
 *
 * <example-url>../../iframe.html?id=components-notification--basic</example-url>
 */
var Notification = /** @class */ (function () {
    function Notification(notificationDisplayService, i18n) {
        this.notificationDisplayService = notificationDisplayService;
        this.i18n = i18n;
        /**
         * Emits on close.
         */
        this.close = new EventEmitter();
        this.notificationID = "notification-" + Notification.notificationCount++;
        this.notificationClass = true;
        this.role = "alert";
        this.defaultNotificationObj = {
            title: "",
            message: "",
            type: "info",
            showClose: true,
            closeLabel: this.i18n.get("NOTIFICATION.CLOSE_BUTTON")
        };
        this._notificationObj = Object.assign({}, this.defaultNotificationObj);
    }
    Object.defineProperty(Notification.prototype, "notificationObj", {
        /**
         * Can have `type`, `title`, and `message` members.
         *
         * `type` can be one of `"info"`, `"warning"`, `"error"`, `"success"`
         *
         * `message` is the message to display
         */
        get: function () {
            return this._notificationObj;
        },
        set: function (obj) {
            if (obj.closeLabel) {
                obj.closeLabel = of(obj.closeLabel);
            }
            this._notificationObj = Object.assign({}, this.defaultNotificationObj, obj);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Notification.prototype, "isError", {
        get: function () { return this.notificationObj.type === "error"; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Notification.prototype, "isInfo", {
        get: function () { return this.notificationObj.type === "info"; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Notification.prototype, "isSuccess", {
        get: function () { return this.notificationObj.type === "success"; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Notification.prototype, "isWarning", {
        get: function () { return this.notificationObj.type === "warning"; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Notification.prototype, "isLowContrast", {
        get: function () { return this.notificationObj.lowContrast; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Notification.prototype, "isCloseHidden", {
        get: function () { return !this._notificationObj.showClose; },
        enumerable: true,
        configurable: true
    });
    /**
     * Emits close event.
     */
    Notification.prototype.onClose = function () {
        this.close.emit();
    };
    Notification.prototype.onClick = function (action, event) {
        if (!action.click) {
            return;
        }
        if (isObservable(action.click)) {
            action.click.next({ event: event, action: action });
        }
        else {
            action.click({ event: event, action: action });
        }
    };
    Notification.prototype.destroy = function () {
        this.notificationDisplayService.close(this);
    };
    Notification.notificationCount = 0;
    Notification.decorators = [
        { type: Component, args: [{
                    selector: "ibm-notification",
                    template: "\n\t\t<div class=\"bx--inline-notification__details\">\n\t\t\t<svg\n\t\t\t\tibmIcon=\"error--filled\"\n\t\t\t\tsize=\"20\"\n\t\t\t\t*ngIf=\"notificationObj.type === 'error'\"\n\t\t\t\tclass=\"bx--inline-notification__icon\">\n\t\t\t</svg>\n\t\t\t<svg\n\t\t\t\tibmIcon=\"warning--filled\"\n\t\t\t\tsize=\"20\"\n\t\t\t\t*ngIf=\"notificationObj.type === 'warning'\"\n\t\t\t\tclass=\"bx--inline-notification__icon\">\n\t\t\t</svg>\n\t\t\t<svg\n\t\t\t\tibmIcon=\"checkmark--filled\"\n\t\t\t\tsize=\"20\"\n\t\t\t\t*ngIf=\"notificationObj.type === 'success'\"\n\t\t\t\tclass=\"bx--inline-notification__icon\">\n\t\t\t</svg>\n\t\t\t<svg\n\t\t\t\tibmIcon=\"information--filled\"\n\t\t\t\tsize=\"20\"\n\t\t\t\t*ngIf=\"notificationObj.type === 'info'\"\n\t\t\t\tclass=\"bx--inline-notification__icon\">\n\t\t\t</svg>\n\t\t\t<div class=\"bx--inline-notification__text-wrapper\">\n\t\t\t\t<p *ngIf=\"!notificationObj.template\" ibmNotificationTitle [innerHTML]=\"notificationObj.title\"></p>\n\t\t\t\t<div *ngIf=\"!notificationObj.template\" ibmNotificationSubtitle>\n\t\t\t\t\t<span [innerHTML]=\"notificationObj.message\"></span>\n\t\t\t\t\t<ng-container *ngFor=\"let link of notificationObj.links\">\n\t\t\t\t\t\t<a ibmLink [href]=\"link.href\"> {{link.text}}</a>\n\t\t\t\t\t</ng-container>\n\t\t\t\t</div>\n\t\t\t\t<ng-container *ngTemplateOutlet=\"notificationObj.template; context: { $implicit: notificationObj}\"></ng-container>\n\t\t\t</div>\n\t\t</div>\n\t\t<div *ngFor=\"let action of notificationObj.actions\">\n\t\t\t<button\n\t\t\t\t(click)=\"onClick(action, $event)\"\n\t\t\t\tibmButton=\"ghost\"\n\t\t\t\tsize=\"sm\"\n\t\t\t\tclass=\"bx--inline-notification__action-button\"\n\t\t\t\ttype=\"button\">\n\t\t\t\t{{action.text}}\n\t\t\t</button>\n\t\t</div>\n\t\t<button\n\t\t\t*ngIf=\"!isCloseHidden\"\n\t\t\t(click)=\"onClose()\"\n\t\t\tclass=\"bx--inline-notification__close-button\"\n\t\t\t[attr.aria-label]=\"notificationObj.closeLabel | async\"\n\t\t\ttype=\"button\">\n\t\t\t<svg ibmIcon=\"close\" size=\"16\" class=\"bx--inline-notification__close-icon\"></svg>\n\t\t</button>\n\t"
                }] }
    ];
    /** @nocollapse */
    Notification.ctorParameters = function () { return [
        { type: NotificationDisplayService },
        { type: I18n }
    ]; };
    Notification.propDecorators = {
        notificationObj: [{ type: Input }],
        close: [{ type: Output }],
        notification: [{ type: ViewChild, args: ["notification", { static: false },] }],
        notificationID: [{ type: HostBinding, args: ["attr.id",] }],
        notificationClass: [{ type: HostBinding, args: ["class.bx--inline-notification",] }],
        role: [{ type: HostBinding, args: ["attr.role",] }],
        isError: [{ type: HostBinding, args: ["class.bx--inline-notification--error",] }],
        isInfo: [{ type: HostBinding, args: ["class.bx--inline-notification--info",] }],
        isSuccess: [{ type: HostBinding, args: ["class.bx--inline-notification--success",] }],
        isWarning: [{ type: HostBinding, args: ["class.bx--inline-notification--warning",] }],
        isLowContrast: [{ type: HostBinding, args: ["class.bx--inline-notification--low-contrast",] }],
        isCloseHidden: [{ type: HostBinding, args: ["class.bx--inline-notification--hide-close-button",] }]
    };
    return Notification;
}());
export { Notification };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2NhcmJvbi1jb21wb25lbnRzLWFuZ3VsYXIvbm90aWZpY2F0aW9uLyIsInNvdXJjZXMiOlsibm90aWZpY2F0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ04sU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUVaLFNBQVMsRUFDVCxXQUFXLEVBQ1gsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3RELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFXLE1BQU0sTUFBTSxDQUFDO0FBRWpEOzs7Ozs7R0FNRztBQUNIO0lBNEdDLHNCQUFzQiwwQkFBc0QsRUFBWSxJQUFVO1FBQTVFLCtCQUEwQixHQUExQiwwQkFBMEIsQ0FBNEI7UUFBWSxTQUFJLEdBQUosSUFBSSxDQUFNO1FBOUJsRzs7V0FFRztRQUNPLFVBQUssR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQU9oQyxtQkFBYyxHQUFHLGtCQUFnQixZQUFZLENBQUMsaUJBQWlCLEVBQUksQ0FBQztRQUM5QyxzQkFBaUIsR0FBRyxJQUFJLENBQUM7UUFDN0MsU0FBSSxHQUFHLE9BQU8sQ0FBQztRQVMvQiwyQkFBc0IsR0FBRztZQUNsQyxLQUFLLEVBQUUsRUFBRTtZQUNULE9BQU8sRUFBRSxFQUFFO1lBQ1gsSUFBSSxFQUFFLE1BQU07WUFDWixTQUFTLEVBQUUsSUFBSTtZQUNmLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQztTQUN0RCxDQUFDO1FBQ1EscUJBQWdCLEdBQXdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxD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LCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRDb21wb25lbnQsXG5cdElucHV0LFxuXHRPdXRwdXQsXG5cdEV2ZW50RW1pdHRlcixcblx0Q29tcG9uZW50UmVmLFxuXHRWaWV3Q2hpbGQsXG5cdEhvc3RCaW5kaW5nXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCB7IE5vdGlmaWNhdGlvbkNvbnRlbnQgfSBmcm9tIFwiLi9ub3RpZmljYXRpb24tY29udGVudC5pbnRlcmZhY2VcIjtcbmltcG9ydCB7IEkxOG4gfSBmcm9tIFwiY2FyYm9uLWNvbXBvbmVudHMtYW5ndWxhci9pMThuXCI7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25EaXNwbGF5U2VydmljZSB9IGZyb20gXCIuL25vdGlmaWNhdGlvbi1kaXNwbGF5LnNlcnZpY2VcIjtcbmltcG9ydCB7IG9mLCBpc09ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuXG4vKipcbiAqIE5vdGlmaWNhdGlvbiBtZXNzYWdlcyBhcmUgZGlzcGxheWVkIHRvd2FyZCB0aGUgdG9wIG9mIHRoZSBVSSBhbmQgZG8gbm90IGludGVycnVwdCB1c2Vy4oCZcyB3b3JrLlxuICpcbiAqIFtTZWUgZGVtb10oLi4vLi4vP3BhdGg9L3N0b3J5L2NvbXBvbmVudHMtbm90aWZpY2F0aW9uLS1iYXNpYylcbiAqXG4gKiA8ZXhhbXBsZS11cmw+Li4vLi4vaWZyYW1lLmh0bWw/aWQ9Y29tcG9uZW50cy1ub3RpZmljYXRpb24tLWJhc2ljPC9leGFtcGxlLXVybD5cbiAqL1xuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiBcImlibS1ub3RpZmljYXRpb25cIixcblx0dGVtcGxhdGU6IGBcblx0XHQ8ZGl2IGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX2RldGFpbHNcIj5cblx0XHRcdDxzdmdcblx0XHRcdFx0aWJtSWNvbj1cImVycm9yLS1maWxsZWRcIlxuXHRcdFx0XHRzaXplPVwiMjBcIlxuXHRcdFx0XHQqbmdJZj1cIm5vdGlmaWNhdGlvbk9iai50eXBlID09PSAnZXJyb3InXCJcblx0XHRcdFx0Y2xhc3M9XCJieC0taW5saW5lLW5vdGlmaWNhdGlvbl9faWNvblwiPlxuXHRcdFx0PC9zdmc+XG5cdFx0XHQ8c3ZnXG5cdFx0XHRcdGlibUljb249XCJ3YXJuaW5nLS1maWxsZWRcIlxuXHRcdFx0XHRzaXplPVwiMjBcIlxuXHRcdFx0XHQqbmdJZj1cIm5vdGlmaWNhdGlvbk9iai50eXBlID09PSAnd2FybmluZydcIlxuXHRcdFx0XHRjbGFzcz1cImJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uX19pY29uXCI+XG5cdFx0XHQ8L3N2Zz5cblx0XHRcdDxzdmdcblx0XHRcdFx0aWJtSWNvbj1cImNoZWNrbWFyay0tZmlsbGVkXCJcblx0XHRcdFx0c2l6ZT1cIjIwXCJcblx0XHRcdFx0Km5nSWY9XCJub3RpZmljYXRpb25PYmoudHlwZSA9PT0gJ3N1Y2Nlc3MnXCJcblx0XHRcdFx0Y2xhc3M9XCJieC0taW5saW5lLW5vdGlmaWNhdGlvbl9faWNvblwiPlxuXHRcdFx0PC9zdmc+XG5cdFx0XHQ8c3ZnXG5cdFx0XHRcdGlibUljb249XCJpbmZvcm1hdGlvbi0tZmlsbGVkXCJcblx0XHRcdFx0c2l6ZT1cIjIwXCJcblx0XHRcdFx0Km5nSWY9XCJub3RpZmljYXRpb25PYmoudHlwZSA9PT0gJ2luZm8nXCJcblx0XHRcdFx0Y2xhc3M9XCJieC0taW5saW5lLW5vdGlmaWNhdGlvbl9faWNvblwiPlxuXHRcdFx0PC9zdmc+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX3RleHQtd3JhcHBlclwiPlxuXHRcdFx0XHQ8cCAqbmdJZj1cIiFub3RpZmljYXRpb25PYmoudGVtcGxhdGVcIiBpYm1Ob3RpZmljYXRpb25UaXRsZSBbaW5uZXJIVE1MXT1cIm5vdGlmaWNhdGlvbk9iai50aXRsZVwiPjwvcD5cblx0XHRcdFx0PGRpdiAqbmdJZj1cIiFub3RpZmljYXRpb25PYmoudGVtcGxhdGVcIiBpYm1Ob3RpZmljYXRpb25TdWJ0aXRsZT5cblx0XHRcdFx0XHQ8c3BhbiBbaW5uZXJIVE1MXT1cIm5vdGlmaWNhdGlvbk9iai5tZXNzYWdlXCI+PC9zcGFuPlxuXHRcdFx0XHRcdDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGxpbmsgb2Ygbm90aWZpY2F0aW9uT2JqLmxpbmtzXCI+XG5cdFx0XHRcdFx0XHQ8YSBpYm1MaW5rIFtocmVmXT1cImxpbmsuaHJlZlwiPiB7e2xpbmsudGV4dH19PC9hPlxuXHRcdFx0XHRcdDwvbmctY29udGFpbmVyPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIm5vdGlmaWNhdGlvbk9iai50ZW1wbGF0ZTsgY29udGV4dDogeyAkaW1wbGljaXQ6IG5vdGlmaWNhdGlvbk9ian1cIj48L25nLWNvbnRhaW5lcj5cblx0XHRcdDwvZGl2PlxuXHRcdDwvZGl2PlxuXHRcdDxkaXYgKm5nRm9yPVwibGV0IGFjdGlvbiBvZiBub3RpZmljYXRpb25PYmouYWN0aW9uc1wiPlxuXHRcdFx0PGJ1dHRvblxuXHRcdFx0XHQoY2xpY2spPVwib25DbGljayhhY3Rpb24sICRldmVudClcIlxuXHRcdFx0XHRpYm1CdXR0b249XCJnaG9zdFwiXG5cdFx0XHRcdHNpemU9XCJzbVwiXG5cdFx0XHRcdGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX2FjdGlvbi1idXR0b25cIlxuXHRcdFx0XHR0eXBlPVwiYnV0dG9uXCI+XG5cdFx0XHRcdHt7YWN0aW9uLnRleHR9fVxuXHRcdFx0PC9idXR0b24+XG5cdFx0PC9kaXY+XG5cdFx0PGJ1dHRvblxuXHRcdFx0Km5nSWY9XCIhaXNDbG9zZUhpZGRlblwiXG5cdFx0XHQoY2xpY2spPVwib25DbG9zZSgpXCJcblx0XHRcdGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX2Nsb3NlLWJ1dHRvblwiXG5cdFx0XHRbYXR0ci5hcmlhLWxhYmVsXT1cIm5vdGlmaWNhdGlvbk9iai5jbG9zZUxhYmVsIHwgYXN5bmNcIlxuXHRcdFx0dHlwZT1cImJ1dHRvblwiPlxuXHRcdFx0PHN2ZyBpYm1JY29uPVwiY2xvc2VcIiBzaXplPVwiMTZcIiBjbGFzcz1cImJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uX19jbG9zZS1pY29uXCI+PC9zdmc+XG5cdFx0PC9idXR0b24+XG5cdGBcbn0pXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uIHtcblx0cHJpdmF0ZSBzdGF0aWMgbm90aWZpY2F0aW9uQ291bnQgPSAwO1xuXHQvKipcblx0ICogQ2FuIGhhdmUgYHR5cGVgLCBgdGl0bGVgLCBhbmQgYG1lc3NhZ2VgIG1lbWJlcnMuXG5cdCAqXG5cdCAqIGB0eXBlYCBjYW4gYmUgb25lIG9mIGBcImluZm9cImAsIGBcIndhcm5pbmdcImAsIGBcImVycm9yXCJgLCBgXCJzdWNjZXNzXCJgXG5cdCAqXG5cdCAqIGBtZXNzYWdlYCBpcyB0aGUgbWVzc2FnZSB0byBkaXNwbGF5XG5cdCAqL1xuXHRASW5wdXQoKSBnZXQgbm90aWZpY2F0aW9uT2JqKCk6IE5vdGlmaWNhdGlvbkNvbnRlbnQge1xuXHRcdHJldHVybiB0aGlzLl9ub3RpZmljYXRpb25PYmo7XG5cdH1cblx0c2V0IG5vdGlmaWNhdGlvbk9iaihvYmo6IE5vdGlmaWNhdGlvbkNvbnRlbnQpIHtcblx0XHRpZiAob2JqLmNsb3NlTGFiZWwpIHtcblx0XHRcdG9iai5jbG9zZUxhYmVsID0gb2Yob2JqLmNsb3NlTGFiZWwpO1xuXHRcdH1cblx0XHR0aGlzLl9ub3RpZmljYXRpb25PYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHROb3RpZmljYXRpb25PYmosIG9iaik7XG5cdH1cblxuXHQvKipcblx0ICogRW1pdHMgb24gY2xvc2UuXG5cdCAqL1xuXHRAT3V0cHV0KCkgY2xvc2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG5cdGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPE5vdGlmaWNhdGlvbj47XG5cblx0Ly8gQHRzLWlnbm9yZVxuXHRAVmlld0NoaWxkKFwibm90aWZpY2F0aW9uXCIsIHsgc3RhdGljOiBmYWxzZSB9KSBub3RpZmljYXRpb247XG5cblx0QEhvc3RCaW5kaW5nKFwiYXR0ci5pZFwiKSBub3RpZmljYXRpb25JRCA9IGBub3RpZmljYXRpb24tJHtOb3RpZmljYXRpb24ubm90aWZpY2F0aW9uQ291bnQrK31gO1xuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0taW5saW5lLW5vdGlmaWNhdGlvblwiKSBub3RpZmljYXRpb25DbGFzcyA9IHRydWU7XG5cdEBIb3N0QmluZGluZyhcImF0dHIucm9sZVwiKSByb2xlID0gXCJhbGVydFwiO1xuXG5cdEBIb3N0QmluZGluZyhcImNsYXNzLmJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uLS1lcnJvclwiKSBnZXQgaXNFcnJvcigpIHsgcmV0dXJuIHRoaXMubm90aWZpY2F0aW9uT2JqLnR5cGUgPT09IFwiZXJyb3JcIjsgfVxuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0taW5saW5lLW5vdGlmaWNhdGlvbi0taW5mb1wiKSBnZXQgaXNJbmZvKCkgeyByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25PYmoudHlwZSA9PT0gXCJpbmZvXCI7IH1cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWlubGluZS1ub3RpZmljYXRpb24tLXN1Y2Nlc3NcIikgZ2V0IGlzU3VjY2VzcygpIHsgcmV0dXJuIHRoaXMubm90aWZpY2F0aW9uT2JqLnR5cGUgPT09IFwic3VjY2Vzc1wiOyB9XG5cdEBIb3N0QmluZGluZyhcImNsYXNzLmJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uLS13YXJuaW5nXCIpIGdldCBpc1dhcm5pbmcoKSB7IHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbk9iai50eXBlID09PSBcIndhcm5pbmdcIjsgfVxuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0taW5saW5lLW5vdGlmaWNhdGlvbi0tbG93LWNvbnRyYXN0XCIpIGdldCBpc0xvd0NvbnRyYXN0KCkgeyByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25PYmoubG93Q29udHJhc3Q7IH1cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWlubGluZS1ub3RpZmljYXRpb24tLWhpZGUtY2xvc2UtYnV0dG9uXCIpIGdldCBpc0Nsb3NlSGlkZGVuKCkgeyByZXR1cm4gIXRoaXMuX25vdGlmaWNhdGlvbk9iai5zaG93Q2xvc2U7IH1cblxuXHRwcm90ZWN0ZWQgZGVmYXVsdE5vdGlmaWNhdGlvbk9iaiA9IHtcblx0XHR0aXRsZTogXCJcIixcblx0XHRtZXNzYWdlOiBcIlwiLFxuXHRcdHR5cGU6IFwiaW5mb1wiLFxuXHRcdHNob3dDbG9zZTogdHJ1ZSxcblx0XHRjbG9zZUxhYmVsOiB0aGlzLmkxOG4uZ2V0KFwiTk9USUZJQ0FUSU9OLkNMT1NFX0JVVFRPTlwiKVxuXHR9O1xuXHRwcm90ZWN0ZWQgX25vdGlmaWNhdGlvbk9iajogTm90aWZpY2F0aW9uQ29udGVudCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdE5vdGlmaWNhdGlvbk9iaik7XG5cblx0Y29uc3RydWN0b3IocHJvdGVjdGVkIG5vdGlmaWNhdGlvbkRpc3BsYXlTZXJ2aWNlOiBOb3RpZmljYXRpb25EaXNwbGF5U2VydmljZSwgcHJvdGVjdGVkIGkxOG46IEkxOG4pIHt9XG5cblx0LyoqXG5cdCAqIEVtaXRzIGNsb3NlIGV2ZW50LlxuXHQgKi9cblx0b25DbG9zZSgpIHtcblx0XHR0aGlzLmNsb3NlLmVtaXQoKTtcblx0fVxuXG5cdG9uQ2xpY2soYWN0aW9uLCBldmVudCkge1xuXHRcdGlmICghYWN0aW9uLmNsaWNrKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChpc09ic2VydmFibGUoYWN0aW9uLmNsaWNrKSkge1xuXHRcdFx0KGFjdGlvbi5jbGljayBhcyBTdWJqZWN0PHtldmVudDogRXZlbnQsIGFjdGlvbjogYW55fT4pLm5leHQoe2V2ZW50LCBhY3Rpb259KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWN0aW9uLmNsaWNrKHtldmVudCwgYWN0aW9ufSk7XG5cdFx0fVxuXHR9XG5cblx0ZGVzdHJveSgpIHtcblx0XHR0aGlzLm5vdGlmaWNhdGlvbkRpc3BsYXlTZXJ2aWNlLmNsb3NlKHRoaXMpO1xuXHR9XG59XG4iXX0=