/**
 *
 * carbon-angular v0.0.0 | progress-indicator.component.js
 *
 * Copyright 2014, 2022 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Input, Output, EventEmitter } from "@angular/core";
import { ExperimentalService } from "carbon-components-angular/experimental";
/**
 * [See demo](../../?path=/story/components-progress-indicator--basic)
 *
 * <example-url>../../iframe.html?id=components-progress-indicator--basic</example-url>
 */
var ProgressIndicator = /** @class */ (function () {
    function ProgressIndicator(experimental) {
        this.experimental = experimental;
        this.stepSelected = new EventEmitter();
        this.orientation = "horizontal";
        this.skeleton = false;
        this.spacing = "default";
    }
    ProgressIndicator.skeletonSteps = function (stepCount) {
        var steps = [];
        for (var i = 0; i < stepCount; i++) {
            steps.push({ "state": ["incomplete"] });
        }
        return steps;
    };
    Object.defineProperty(ProgressIndicator.prototype, "current", {
        get: function () {
            return this.steps.findIndex(function (step) { return step.state.includes("current"); });
        },
        set: function (current) {
            this._current = current;
        },
        enumerable: true,
        configurable: true
    });
    ProgressIndicator.prototype.ngOnChanges = function (changes) {
        if (changes.steps || changes.current) {
            this.setProgressIndicatorStates();
        }
    };
    ProgressIndicator.prototype.setProgressIndicatorStates = function () {
        if (this.steps === undefined) {
            return;
        }
        if (this._current === undefined || this._current < 0) {
            for (var i = 0; i < this.steps.length; i++) {
                this.steps[i].state[0] = "incomplete";
            }
            return;
        }
        if (this._current > this.steps.length - 1) {
            for (var i = 0; i < this.steps.length; i++) {
                this.steps[i].state[0] = "complete";
            }
            return;
        }
        this.steps[this._current].state[0] = "current";
        for (var i = 0; i < this._current; i++) {
            this.steps[i].state[0] = "complete";
        }
        for (var i = this._current + 1; i < this.steps.length; i++) {
            this.steps[i].state[0] = "incomplete";
        }
    };
    ProgressIndicator.decorators = [
        { type: Component, args: [{
                    selector: "ibm-progress-indicator",
                    template: "\n\t<ul\n\t\tdata-progress\n\t\tdata-progress-current\n\t\tclass=\"bx--progress\"\n\t\t[ngClass]=\"{\n\t\t\t'bx--skeleton': skeleton,\n\t\t\t'bx--progress--vertical': (orientation === 'vertical'),\n\t\t\t'bx--progress--space-equal': spacing === 'equal' && orientation !== 'vertical'\n\t\t}\">\n\t\t<li\n\t\t\tclass=\"bx--progress-step bx--progress-step--{{step.state[0]}}\"\n\t\t\t*ngFor=\"let step of steps; let i = index\"\n\t\t\t[ngClass]=\"{'bx--progress-step--disabled' : step.disabled}\">\n\t\t\t<div class=\"bx--progress-step-button bx--progress-step-button--unclickable\" role=\"button\" tabindex=\"-1\">\n\t\t\t\t<svg ibmIcon=\"checkmark--outline\" size=\"16\" *ngIf=\"step.state.includes('complete')\"></svg>\n\t\t\t\t<svg *ngIf=\"step.state.includes('current')\">\n\t\t\t\t\t<path d=\"M 7, 7 m -7, 0 a 7,7 0 1,0 14,0 a 7,7 0 1,0 -14,0\" ></path>\n\t\t\t\t</svg>\n\t\t\t\t<svg *ngIf=\"step.state.includes('incomplete')\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M8 1C4.1 1 1 4.1 1 8s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7zm0 13c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z\">\n\t\t\t\t\t</path>\n\t\t\t\t</svg>\n\t\t\t\t<svg ibmIcon=\"warning\" size=\"16\" *ngIf=\"step.state.includes('error')\" class=\"bx--progress__warning\"></svg>\n\t\t\t\t<p\n\t\t\t\t\tclass=\"bx--progress-label\"\n\t\t\t\t\t*ngIf=\"step.tooltip\"\n\t\t\t\t\t[ibmTooltip]=\"step.tooltip.content\"\n\t\t\t\t\t[trigger]=\"step.tooltip.trigger\"\n\t\t\t\t\t[placement]=\"step.tooltip.placement\"\n\t\t\t\t\t[title]=\"step.tooltip.title\"\n\t\t\t\t\t[gap]=\"step.tooltip.gap\"\n\t\t\t\t\t[appendInline]=\"step.tooltip.appendInline\"\n\t\t\t\t\t[data]=\"step.tooltip.data\"\n\t\t\t\t\t(click)=\"stepSelected.emit({ step: step, index: i })\">\n\t\t\t\t\t{{step.text}}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"bx--progress-label\" *ngIf=\"!step.tooltip\" (click)=\"stepSelected.emit({ step: step, index: i })\">{{step.text}}</p>\n\t\t\t\t<p *ngIf=\"step.optionalText\" class=\"bx--progress-optional\">{{step.optionalText}}</p>\n\t\t\t\t<span class=\"bx--progress-line\"></span>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n\t"
                }] }
    ];
    /** @nocollapse */
    ProgressIndicator.ctorParameters = function () { return [
        { type: ExperimentalService }
    ]; };
    ProgressIndicator.propDecorators = {
        stepSelected: [{ type: Output }],
        steps: [{ type: Input }],
        orientation: [{ type: Input }],
        skeleton: [{ type: Input }],
        spacing: [{ type: Input }],
        current: [{ type: Input }]
    };
    return ProgressIndicator;
}());
export { ProgressIndicator };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtaW5kaWNhdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2NhcmJvbi1jb21wb25lbnRzLWFuZ3VsYXIvcHJvZ3Jlc3MtaW5kaWNhdG9yLyIsInNvdXJjZXMiOlsicHJvZ3Jlc3MtaW5kaWNhdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ04sU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBRzdFOzs7O0dBSUc7QUFDSDtJQXlFQywyQkFBc0IsWUFBaUM7UUFBakMsaUJBQVksR0FBWixZQUFZLENBQXFCO1FBZjdDLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQWlDLENBQUM7UUFHbEUsZ0JBQVcsR0FBOEIsWUFBWSxDQUFDO1FBQ3RELGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsWUFBTyxHQUF3QixTQUFTLENBQUM7SUFVUSxDQUFDO0lBeEJwRCwrQkFBYSxHQUFwQixVQUFxQixTQUFpQjtRQUNyQyxJQUFNLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDakIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLENBQUMsWUFBWSxDQUFDLEVBQUMsQ0FBQyxDQUFDO1NBQ3RDO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFDZCxDQUFDO0lBU0Qsc0JBQWEsc0NBQU87YUFBcEI7WUFDQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQTlCLENBQThCLENBQUMsQ0FBQztRQUNyRSxDQUFDO2FBQ0QsVUFBWSxPQUFlO1lBQzFCLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO1FBQ3pCLENBQUM7OztPQUhBO0lBUUQsdUNBQVcsR0FBWCxVQUFZLE9BQXNCO1FBQ2pDLElBQUksT0FBTyxDQUFDLEtBQUssSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFO1lBQ3JDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1NBQ2xDO0lBQ0YsQ0FBQztJQUVPLHNEQUEwQixHQUFsQztRQUNDLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUU7WUFDN0IsT0FBTztTQUNQO1FBRUQsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsRUFBRTtZQUNyRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzNDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQzthQUN0QztZQUNELE9BQU87U0FDUDtRQUVELElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDMUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMzQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7YUFDcEM7WUFDRCxPQUFPO1NBQ1A7UUFDRCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDO1FBQy9DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQztTQUNwQztRQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzNELElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQztTQUN0QztJQUNGLENBQUM7O2dCQTFHRCxTQUFTLFNBQUM7b0JBQ1YsUUFBUSxFQUFFLHdCQUF3QjtvQkFDbEMsUUFBUSxFQUFFLDBoRUE0Q1Q7aUJBQ0Q7Ozs7Z0JBdkRRLG1CQUFtQjs7OytCQWtFMUIsTUFBTTt3QkFFTixLQUFLOzhCQUNMLEtBQUs7MkJBQ0wsS0FBSzswQkFDTCxLQUFLOzBCQUVMLEtBQUs7O0lBMENQLHdCQUFDO0NBQUEsQUEzR0QsSUEyR0M7U0EzRFksaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcblx0Q29tcG9uZW50LFxuXHRJbnB1dCxcblx0T3V0cHV0LFxuXHRFdmVudEVtaXR0ZXIsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlc1xufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRXhwZXJpbWVudGFsU2VydmljZSB9IGZyb20gXCJjYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2V4cGVyaW1lbnRhbFwiO1xuaW1wb3J0IHsgU3RlcCB9IGZyb20gXCIuL3Byb2dyZXNzLWluZGljYXRvci1zdGVwLmludGVyZmFjZVwiO1xuXG4vKipcbiAqIFtTZWUgZGVtb10oLi4vLi4vP3BhdGg9L3N0b3J5L2NvbXBvbmVudHMtcHJvZ3Jlc3MtaW5kaWNhdG9yLS1iYXNpYylcbiAqXG4gKiA8ZXhhbXBsZS11cmw+Li4vLi4vaWZyYW1lLmh0bWw/aWQ9Y29tcG9uZW50cy1wcm9ncmVzcy1pbmRpY2F0b3ItLWJhc2ljPC9leGFtcGxlLXVybD5cbiAqL1xuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiBcImlibS1wcm9ncmVzcy1pbmRpY2F0b3JcIixcblx0dGVtcGxhdGU6IGBcblx0PHVsXG5cdFx0ZGF0YS1wcm9ncmVzc1xuXHRcdGRhdGEtcHJvZ3Jlc3MtY3VycmVudFxuXHRcdGNsYXNzPVwiYngtLXByb2dyZXNzXCJcblx0XHRbbmdDbGFzc109XCJ7XG5cdFx0XHQnYngtLXNrZWxldG9uJzogc2tlbGV0b24sXG5cdFx0XHQnYngtLXByb2dyZXNzLS12ZXJ0aWNhbCc6IChvcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJyksXG5cdFx0XHQnYngtLXByb2dyZXNzLS1zcGFjZS1lcXVhbCc6IHNwYWNpbmcgPT09ICdlcXVhbCcgJiYgb3JpZW50YXRpb24gIT09ICd2ZXJ0aWNhbCdcblx0XHR9XCI+XG5cdFx0PGxpXG5cdFx0XHRjbGFzcz1cImJ4LS1wcm9ncmVzcy1zdGVwIGJ4LS1wcm9ncmVzcy1zdGVwLS17e3N0ZXAuc3RhdGVbMF19fVwiXG5cdFx0XHQqbmdGb3I9XCJsZXQgc3RlcCBvZiBzdGVwczsgbGV0IGkgPSBpbmRleFwiXG5cdFx0XHRbbmdDbGFzc109XCJ7J2J4LS1wcm9ncmVzcy1zdGVwLS1kaXNhYmxlZCcgOiBzdGVwLmRpc2FibGVkfVwiPlxuXHRcdFx0PGRpdiBjbGFzcz1cImJ4LS1wcm9ncmVzcy1zdGVwLWJ1dHRvbiBieC0tcHJvZ3Jlc3Mtc3RlcC1idXR0b24tLXVuY2xpY2thYmxlXCIgcm9sZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiLTFcIj5cblx0XHRcdFx0PHN2ZyBpYm1JY29uPVwiY2hlY2ttYXJrLS1vdXRsaW5lXCIgc2l6ZT1cIjE2XCIgKm5nSWY9XCJzdGVwLnN0YXRlLmluY2x1ZGVzKCdjb21wbGV0ZScpXCI+PC9zdmc+XG5cdFx0XHRcdDxzdmcgKm5nSWY9XCJzdGVwLnN0YXRlLmluY2x1ZGVzKCdjdXJyZW50JylcIj5cblx0XHRcdFx0XHQ8cGF0aCBkPVwiTSA3LCA3IG0gLTcsIDAgYSA3LDcgMCAxLDAgMTQsMCBhIDcsNyAwIDEsMCAtMTQsMFwiID48L3BhdGg+XG5cdFx0XHRcdDwvc3ZnPlxuXHRcdFx0XHQ8c3ZnICpuZ0lmPVwic3RlcC5zdGF0ZS5pbmNsdWRlcygnaW5jb21wbGV0ZScpXCI+XG5cdFx0XHRcdFx0PHBhdGhcblx0XHRcdFx0XHRcdGQ9XCJNOCAxQzQuMSAxIDEgNC4xIDEgOHMzLjEgNyA3IDcgNy0zLjEgNy03LTMuMS03LTctN3ptMCAxM2MtMy4zIDAtNi0yLjctNi02czIuNy02IDYtNiA2IDIuNyA2IDYtMi43IDYtNiA2elwiPlxuXHRcdFx0XHRcdDwvcGF0aD5cblx0XHRcdFx0PC9zdmc+XG5cdFx0XHRcdDxzdmcgaWJtSWNvbj1cIndhcm5pbmdcIiBzaXplPVwiMTZcIiAqbmdJZj1cInN0ZXAuc3RhdGUuaW5jbHVkZXMoJ2Vycm9yJylcIiBjbGFzcz1cImJ4LS1wcm9ncmVzc19fd2FybmluZ1wiPjwvc3ZnPlxuXHRcdFx0XHQ8cFxuXHRcdFx0XHRcdGNsYXNzPVwiYngtLXByb2dyZXNzLWxhYmVsXCJcblx0XHRcdFx0XHQqbmdJZj1cInN0ZXAudG9vbHRpcFwiXG5cdFx0XHRcdFx0W2libVRvb2x0aXBdPVwic3RlcC50b29sdGlwLmNvbnRlbnRcIlxuXHRcdFx0XHRcdFt0cmlnZ2VyXT1cInN0ZXAudG9vbHRpcC50cmlnZ2VyXCJcblx0XHRcdFx0XHRbcGxhY2VtZW50XT1cInN0ZXAudG9vbHRpcC5wbGFjZW1lbnRcIlxuXHRcdFx0XHRcdFt0aXRsZV09XCJzdGVwLnRvb2x0aXAudGl0bGVcIlxuXHRcdFx0XHRcdFtnYXBdPVwic3RlcC50b29sdGlwLmdhcFwiXG5cdFx0XHRcdFx0W2FwcGVuZElubGluZV09XCJzdGVwLnRvb2x0aXAuYXBwZW5kSW5saW5lXCJcblx0XHRcdFx0XHRbZGF0YV09XCJzdGVwLnRvb2x0aXAuZGF0YVwiXG5cdFx0XHRcdFx0KGNsaWNrKT1cInN0ZXBTZWxlY3RlZC5lbWl0KHsgc3RlcDogc3RlcCwgaW5kZXg6IGkgfSlcIj5cblx0XHRcdFx0XHR7e3N0ZXAudGV4dH19XG5cdFx0XHRcdDwvcD5cblx0XHRcdFx0PHAgY2xhc3M9XCJieC0tcHJvZ3Jlc3MtbGFiZWxcIiAqbmdJZj1cIiFzdGVwLnRvb2x0aXBcIiAoY2xpY2spPVwic3RlcFNlbGVjdGVkLmVtaXQoeyBzdGVwOiBzdGVwLCBpbmRleDogaSB9KVwiPnt7c3RlcC50ZXh0fX08L3A+XG5cdFx0XHRcdDxwICpuZ0lmPVwic3RlcC5vcHRpb25hbFRleHRcIiBjbGFzcz1cImJ4LS1wcm9ncmVzcy1vcHRpb25hbFwiPnt7c3RlcC5vcHRpb25hbFRleHR9fTwvcD5cblx0XHRcdFx0PHNwYW4gY2xhc3M9XCJieC0tcHJvZ3Jlc3MtbGluZVwiPjwvc3Bhbj5cblx0XHRcdDwvZGl2PlxuXHRcdDwvbGk+XG5cdDwvdWw+XG5cdGBcbn0pXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NJbmRpY2F0b3IgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuXHRzdGF0aWMgc2tlbGV0b25TdGVwcyhzdGVwQ291bnQ6IG51bWJlcikge1xuXHRcdGNvbnN0IHN0ZXBzID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwQ291bnQ7IGkrKykge1xuXHRcdFx0c3RlcHMucHVzaCh7XCJzdGF0ZVwiOiBbXCJpbmNvbXBsZXRlXCJdfSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHN0ZXBzO1xuXHR9XG5cblx0QE91dHB1dCgpIHN0ZXBTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8eyBzdGVwOiBTdGVwLCBpbmRleDogbnVtYmVyIH0+KCk7XG5cblx0QElucHV0KCkgc3RlcHM6IEFycmF5PFN0ZXA+O1xuXHRASW5wdXQoKSBvcmllbnRhdGlvbjogXCJob3Jpem9udGFsXCIgfCBcInZlcnRpY2FsXCIgPSBcImhvcml6b250YWxcIjtcblx0QElucHV0KCkgc2tlbGV0b24gPSBmYWxzZTtcblx0QElucHV0KCkgc3BhY2luZzogXCJkZWZhdWx0XCIgfCBcImVxdWFsXCIgPSBcImRlZmF1bHRcIjtcblxuXHRASW5wdXQoKSBnZXQgY3VycmVudCgpIHtcblx0XHRyZXR1cm4gdGhpcy5zdGVwcy5maW5kSW5kZXgoc3RlcCA9PiBzdGVwLnN0YXRlLmluY2x1ZGVzKFwiY3VycmVudFwiKSk7XG5cdH1cblx0c2V0IGN1cnJlbnQoY3VycmVudDogbnVtYmVyKSB7XG5cdFx0dGhpcy5fY3VycmVudCA9IGN1cnJlbnQ7XG5cdH1cblx0cHJpdmF0ZSBfY3VycmVudDogbnVtYmVyO1xuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBleHBlcmltZW50YWw6IEV4cGVyaW1lbnRhbFNlcnZpY2UpIHt9XG5cblx0bmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuXHRcdGlmIChjaGFuZ2VzLnN0ZXBzIHx8IGNoYW5nZXMuY3VycmVudCkge1xuXHRcdFx0dGhpcy5zZXRQcm9ncmVzc0luZGljYXRvclN0YXRlcygpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2V0UHJvZ3Jlc3NJbmRpY2F0b3JTdGF0ZXMoKSB7XG5cdFx0aWYgKHRoaXMuc3RlcHMgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9jdXJyZW50ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fY3VycmVudCA8IDApIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLnN0ZXBzW2ldLnN0YXRlWzBdID0gXCJpbmNvbXBsZXRlXCI7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2N1cnJlbnQgPiB0aGlzLnN0ZXBzLmxlbmd0aCAtIDEpIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLnN0ZXBzW2ldLnN0YXRlWzBdID0gXCJjb21wbGV0ZVwiO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLnN0ZXBzW3RoaXMuX2N1cnJlbnRdLnN0YXRlWzBdID0gXCJjdXJyZW50XCI7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jdXJyZW50OyBpKyspIHtcblx0XHRcdHRoaXMuc3RlcHNbaV0uc3RhdGVbMF0gPSBcImNvbXBsZXRlXCI7XG5cdFx0fVxuXHRcdGZvciAobGV0IGkgPSB0aGlzLl9jdXJyZW50ICsgMTsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMuc3RlcHNbaV0uc3RhdGVbMF0gPSBcImluY29tcGxldGVcIjtcblx0XHR9XG5cdH1cbn1cbiJdfQ==