/**
 *
 * carbon-angular v0.0.0 | table-toolbar.component.js
 *
 * Copyright 2014, 2022 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { TableModel } from "../table-model.class";
import { Component, EventEmitter, Input, Output } from "@angular/core";
import { I18n } from "carbon-components-angular/i18n";
/**
 * The table toolbar is reserved for global table actions such as table settings, complex filter, export, or editing table data.
 *
 * ## Basic usage
 *
 * ```html
 * <ibm-table-toolbar [model]="model">
 *		<ibm-table-toolbar-actions>
 *			<button ibmButton="primary">
 *				Delete
 *				<svg ibmIcon="delete" size="16" class="bx--btn__icon"></svg>
 *			</button>
 *			<button ibmButton="primary">
 *				Save
 *				<svg ibmIcon="save" size="16" class="bx--btn__icon"></svg>
 *			</button>
 *			<button ibmButton="primary">
 *				Download
 *				<svg ibmIcon="download" size="16" class="bx--btn__icon"></svg>
 *			</button>
 *		</ibm-table-toolbar-actions>
 *			<ibm-table-toolbar-content>
 *			<ibm-table-toolbar-search [expandable]="true"></ibm-table-toolbar-search>
 *			<button ibmButton="toolbar-action">
 *				<svg ibmIcon="settings" size="16" class="bx--toolbar-action__icon"></svg>
 *			</button>
 *			<button ibmButton="primary" size="sm">
 *				Primary Button
 *				<svg ibmIcon="add" size="20" class="bx--btn__icon"></svg>
 *			</button>
 *		</ibm-table-toolbar-content>
 *	</ibm-table-toolbar>
 * ```
 *
 */
var TableToolbar = /** @class */ (function () {
    function TableToolbar(i18n) {
        this.i18n = i18n;
        this.size = "md";
        this.cancel = new EventEmitter();
        this.actionBarLabel = this.i18n.getOverridable("TABLE_TOOLBAR.ACTION_BAR");
        this._cancelText = this.i18n.getOverridable("TABLE_TOOLBAR.CANCEL");
        this._batchTextLegacy = this.i18n.getOverridable("TABLE_TOOLBAR.BATCH_TEXT");
        this._batchTextSingle = this.i18n.getOverridable("TABLE_TOOLBAR.BATCH_TEXT_SINGLE");
        this._batchTextMultiple = this.i18n.getOverridable("TABLE_TOOLBAR.BATCH_TEXT_MULTIPLE");
    }
    Object.defineProperty(TableToolbar.prototype, "batchText", {
        set: function (value) {
            if (typeof value === "object") {
                this._batchTextSingle.override(value.SINGLE);
                this._batchTextMultiple.override(value.MULTIPLE);
            }
            else {
                // For compatibility with old code
                this._batchTextLegacy.override(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "ariaLabel", {
        set: function (value) {
            this.actionBarLabel.override(value.ACTION_BAR);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "cancelText", {
        get: function () {
            return { CANCEL: this._cancelText.value };
        },
        set: function (value) {
            this._cancelText.override(value.CANCEL);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "count", {
        get: function () {
            return this.model.totalDataLength > 0 ? this.model.rowsSelected.reduce(function (previous, current) { return previous + (current ? 1 : 0); }, 0) : 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "selected", {
        get: function () {
            return this.model.totalDataLength > 0 ? this.model.rowsSelected.some(function (item) { return item; }) : false;
        },
        enumerable: true,
        configurable: true
    });
    TableToolbar.prototype.onCancel = function () {
        this.model.selectAll(false);
        this.cancel.emit();
    };
    TableToolbar.decorators = [
        { type: Component, args: [{
                    selector: "ibm-table-toolbar",
                    template: "\n\t<section\n\t\tclass=\"bx--table-toolbar\"\n\t\t[ngClass]=\"{'bx--table-toolbar--small' : size === 'sm'}\">\n\t\t<div\n\t\t\t*ngIf=\"model\"\n\t\t\tclass=\"bx--batch-actions\"\n\t\t\t[ngClass]=\"{\n\t\t\t\t'bx--batch-actions--active': selected\n\t\t\t}\"\n\t\t\t[attr.aria-label]=\"actionBarLabel.subject | async\">\n\t\t\t<div class=\"bx--action-list\">\n\t\t\t\t<ng-content select=\"ibm-table-toolbar-actions\"></ng-content>\n\t\t\t\t<button\n\t\t\t\t\tibmButton=\"primary\"\n\t\t\t\t\tclass=\"bx--batch-summary__cancel\"\n\t\t\t\t\t[tabindex]=\"selected ? 0 : -1\"\n\t\t\t\t\t(click)=\"onCancel()\">\n\t\t\t\t\t{{_cancelText.subject | async}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"bx--batch-summary\">\n\t\t\t\t<p class=\"bx--batch-summary__para\" *ngIf=\"count as n\">\n\t\t\t\t\t<ng-container *ngIf=\"_batchTextLegacy.subject | async as legacyText; else batchTextBlock\">\n\t\t\t\t\t\t<span>{{n}}</span> {{legacyText}}\n\t\t\t\t\t</ng-container>\n\t\t\t\t\t<ng-template #batchTextBlock>\n\t\t\t\t\t\t<span *ngIf=\"n === 1\">{{_batchTextSingle.subject | async}}</span>\n\t\t\t\t\t\t<span *ngIf=\"n !== 1\">{{_batchTextMultiple.subject | i18nReplace: {count: n} | async}}</span>\n\t\t\t\t\t</ng-template>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<ng-content></ng-content>\n\t</section>\n\t"
                }] }
    ];
    /** @nocollapse */
    TableToolbar.ctorParameters = function () { return [
        { type: I18n }
    ]; };
    TableToolbar.propDecorators = {
        model: [{ type: Input }],
        batchText: [{ type: Input }],
        ariaLabel: [{ type: Input }],
        cancelText: [{ type: Input }],
        size: [{ type: Input }],
        cancel: [{ type: Output }]
    };
    return TableToolbar;
}());
export { TableToolbar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtdG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jYXJib24tY29tcG9uZW50cy1hbmd1bGFyL3RhYmxlLyIsInNvdXJjZXMiOlsidG9vbGJhci90YWJsZS10b29sYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUNOLFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUNMLE1BQU0sRUFDTixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsSUFBSSxFQUFlLE1BQU0sZ0NBQWdDLENBQUM7QUFHbkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FrQ0c7QUFDSDtJQXVFQyxzQkFBc0IsSUFBVTtRQUFWLFNBQUksR0FBSixJQUFJLENBQU07UUFkdkIsU0FBSSxHQUFpQixJQUFJLENBQUM7UUFNekIsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFdEMsbUJBQWMsR0FBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUNuRixnQkFBVyxHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzVFLHFCQUFnQixHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQ3JGLHFCQUFnQixHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO1FBQzVGLHVCQUFrQixHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0lBRTdELENBQUM7SUE3QnBDLHNCQUFhLG1DQUFTO2FBQXRCLFVBQXdCLEtBQW9EO1lBQzNFLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO2dCQUM5QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDN0MsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDakQ7aUJBQU07Z0JBQ04sa0NBQWtDO2dCQUNsQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3RDO1FBQ0YsQ0FBQzs7O09BQUE7SUFDRCxzQkFBYSxtQ0FBUzthQUF0QixVQUF3QixLQUE2QjtZQUNwRCxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEQsQ0FBQzs7O09BQUE7SUFDRCxzQkFBYSxvQ0FBVTthQUt2QjtZQUNDLE9BQU8sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFlLEVBQUUsQ0FBQztRQUNyRCxDQUFDO2FBUEQsVUFBd0IsS0FBeUI7WUFDaEQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pDLENBQUM7OztPQUFBO0lBaUJELHNCQUFJLCtCQUFLO2FBQVQ7WUFDQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQUMsUUFBUSxFQUFFLE9BQU8sSUFBSyxPQUFBLFFBQVEsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBNUIsQ0FBNEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BJLENBQUM7OztPQUFBO0lBQ0Qsc0JBQUksa0NBQVE7YUFBWjtZQUNDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLEVBQUosQ0FBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUM1RixDQUFDOzs7T0FBQTtJQUVELCtCQUFRLEdBQVI7UUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3BCLENBQUM7O2dCQW5GRCxTQUFTLFNBQUM7b0JBQ1YsUUFBUSxFQUFFLG1CQUFtQjtvQkFDN0IsUUFBUSxFQUFFLG95Q0FtQ1Q7aUJBQ0Q7Ozs7Z0JBNUVRLElBQUk7Ozt3QkE4RVgsS0FBSzs0QkFFTCxLQUFLOzRCQVNMLEtBQUs7NkJBR0wsS0FBSzt1QkFHTCxLQUFLO3lCQU1MLE1BQU07O0lBcUJSLG1CQUFDO0NBQUEsQUFwRkQsSUFvRkM7U0E3Q1ksWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRhYmxlTW9kZWwgfSBmcm9tIFwiLi4vdGFibGUtbW9kZWwuY2xhc3NcIjtcbmltcG9ydCB7XG5cdENvbXBvbmVudCxcblx0RXZlbnRFbWl0dGVyLFxuXHRJbnB1dCxcblx0T3V0cHV0XG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBJMThuLCBPdmVycmlkYWJsZSB9IGZyb20gXCJjYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2kxOG5cIjtcbmltcG9ydCB7IFRhYmxlUm93U2l6ZSB9IGZyb20gXCIuLi90YWJsZS50eXBlc1wiO1xuXG4vKipcbiAqIFRoZSB0YWJsZSB0b29sYmFyIGlzIHJlc2VydmVkIGZvciBnbG9iYWwgdGFibGUgYWN0aW9ucyBzdWNoIGFzIHRhYmxlIHNldHRpbmdzLCBjb21wbGV4IGZpbHRlciwgZXhwb3J0LCBvciBlZGl0aW5nIHRhYmxlIGRhdGEuXG4gKlxuICogIyMgQmFzaWMgdXNhZ2VcbiAqXG4gKiBgYGBodG1sXG4gKiA8aWJtLXRhYmxlLXRvb2xiYXIgW21vZGVsXT1cIm1vZGVsXCI+XG4gKlx0XHQ8aWJtLXRhYmxlLXRvb2xiYXItYWN0aW9ucz5cbiAqXHRcdFx0PGJ1dHRvbiBpYm1CdXR0b249XCJwcmltYXJ5XCI+XG4gKlx0XHRcdFx0RGVsZXRlXG4gKlx0XHRcdFx0PHN2ZyBpYm1JY29uPVwiZGVsZXRlXCIgc2l6ZT1cIjE2XCIgY2xhc3M9XCJieC0tYnRuX19pY29uXCI+PC9zdmc+XG4gKlx0XHRcdDwvYnV0dG9uPlxuICpcdFx0XHQ8YnV0dG9uIGlibUJ1dHRvbj1cInByaW1hcnlcIj5cbiAqXHRcdFx0XHRTYXZlXG4gKlx0XHRcdFx0PHN2ZyBpYm1JY29uPVwic2F2ZVwiIHNpemU9XCIxNlwiIGNsYXNzPVwiYngtLWJ0bl9faWNvblwiPjwvc3ZnPlxuICpcdFx0XHQ8L2J1dHRvbj5cbiAqXHRcdFx0PGJ1dHRvbiBpYm1CdXR0b249XCJwcmltYXJ5XCI+XG4gKlx0XHRcdFx0RG93bmxvYWRcbiAqXHRcdFx0XHQ8c3ZnIGlibUljb249XCJkb3dubG9hZFwiIHNpemU9XCIxNlwiIGNsYXNzPVwiYngtLWJ0bl9faWNvblwiPjwvc3ZnPlxuICpcdFx0XHQ8L2J1dHRvbj5cbiAqXHRcdDwvaWJtLXRhYmxlLXRvb2xiYXItYWN0aW9ucz5cbiAqXHRcdFx0PGlibS10YWJsZS10b29sYmFyLWNvbnRlbnQ+XG4gKlx0XHRcdDxpYm0tdGFibGUtdG9vbGJhci1zZWFyY2ggW2V4cGFuZGFibGVdPVwidHJ1ZVwiPjwvaWJtLXRhYmxlLXRvb2xiYXItc2VhcmNoPlxuICpcdFx0XHQ8YnV0dG9uIGlibUJ1dHRvbj1cInRvb2xiYXItYWN0aW9uXCI+XG4gKlx0XHRcdFx0PHN2ZyBpYm1JY29uPVwic2V0dGluZ3NcIiBzaXplPVwiMTZcIiBjbGFzcz1cImJ4LS10b29sYmFyLWFjdGlvbl9faWNvblwiPjwvc3ZnPlxuICpcdFx0XHQ8L2J1dHRvbj5cbiAqXHRcdFx0PGJ1dHRvbiBpYm1CdXR0b249XCJwcmltYXJ5XCIgc2l6ZT1cInNtXCI+XG4gKlx0XHRcdFx0UHJpbWFyeSBCdXR0b25cbiAqXHRcdFx0XHQ8c3ZnIGlibUljb249XCJhZGRcIiBzaXplPVwiMjBcIiBjbGFzcz1cImJ4LS1idG5fX2ljb25cIj48L3N2Zz5cbiAqXHRcdFx0PC9idXR0b24+XG4gKlx0XHQ8L2libS10YWJsZS10b29sYmFyLWNvbnRlbnQ+XG4gKlx0PC9pYm0tdGFibGUtdG9vbGJhcj5cbiAqIGBgYFxuICpcbiAqL1xuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiBcImlibS10YWJsZS10b29sYmFyXCIsXG5cdHRlbXBsYXRlOiBgXG5cdDxzZWN0aW9uXG5cdFx0Y2xhc3M9XCJieC0tdGFibGUtdG9vbGJhclwiXG5cdFx0W25nQ2xhc3NdPVwieydieC0tdGFibGUtdG9vbGJhci0tc21hbGwnIDogc2l6ZSA9PT0gJ3NtJ31cIj5cblx0XHQ8ZGl2XG5cdFx0XHQqbmdJZj1cIm1vZGVsXCJcblx0XHRcdGNsYXNzPVwiYngtLWJhdGNoLWFjdGlvbnNcIlxuXHRcdFx0W25nQ2xhc3NdPVwie1xuXHRcdFx0XHQnYngtLWJhdGNoLWFjdGlvbnMtLWFjdGl2ZSc6IHNlbGVjdGVkXG5cdFx0XHR9XCJcblx0XHRcdFthdHRyLmFyaWEtbGFiZWxdPVwiYWN0aW9uQmFyTGFiZWwuc3ViamVjdCB8IGFzeW5jXCI+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwiYngtLWFjdGlvbi1saXN0XCI+XG5cdFx0XHRcdDxuZy1jb250ZW50IHNlbGVjdD1cImlibS10YWJsZS10b29sYmFyLWFjdGlvbnNcIj48L25nLWNvbnRlbnQ+XG5cdFx0XHRcdDxidXR0b25cblx0XHRcdFx0XHRpYm1CdXR0b249XCJwcmltYXJ5XCJcblx0XHRcdFx0XHRjbGFzcz1cImJ4LS1iYXRjaC1zdW1tYXJ5X19jYW5jZWxcIlxuXHRcdFx0XHRcdFt0YWJpbmRleF09XCJzZWxlY3RlZCA/IDAgOiAtMVwiXG5cdFx0XHRcdFx0KGNsaWNrKT1cIm9uQ2FuY2VsKClcIj5cblx0XHRcdFx0XHR7e19jYW5jZWxUZXh0LnN1YmplY3QgfCBhc3luY319XG5cdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0PC9kaXY+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwiYngtLWJhdGNoLXN1bW1hcnlcIj5cblx0XHRcdFx0PHAgY2xhc3M9XCJieC0tYmF0Y2gtc3VtbWFyeV9fcGFyYVwiICpuZ0lmPVwiY291bnQgYXMgblwiPlxuXHRcdFx0XHRcdDxuZy1jb250YWluZXIgKm5nSWY9XCJfYmF0Y2hUZXh0TGVnYWN5LnN1YmplY3QgfCBhc3luYyBhcyBsZWdhY3lUZXh0OyBlbHNlIGJhdGNoVGV4dEJsb2NrXCI+XG5cdFx0XHRcdFx0XHQ8c3Bhbj57e259fTwvc3Bhbj4ge3tsZWdhY3lUZXh0fX1cblx0XHRcdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHRcdFx0XHQ8bmctdGVtcGxhdGUgI2JhdGNoVGV4dEJsb2NrPlxuXHRcdFx0XHRcdFx0PHNwYW4gKm5nSWY9XCJuID09PSAxXCI+e3tfYmF0Y2hUZXh0U2luZ2xlLnN1YmplY3QgfCBhc3luY319PC9zcGFuPlxuXHRcdFx0XHRcdFx0PHNwYW4gKm5nSWY9XCJuICE9PSAxXCI+e3tfYmF0Y2hUZXh0TXVsdGlwbGUuc3ViamVjdCB8IGkxOG5SZXBsYWNlOiB7Y291bnQ6IG59IHwgYXN5bmN9fTwvc3Bhbj5cblx0XHRcdFx0XHQ8L25nLXRlbXBsYXRlPlxuXHRcdFx0XHQ8L3A+XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj5cblx0XHQ8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG5cdDwvc2VjdGlvbj5cblx0YFxufSlcbmV4cG9ydCBjbGFzcyBUYWJsZVRvb2xiYXIge1xuXHRASW5wdXQoKSBtb2RlbDogVGFibGVNb2RlbDtcblxuXHRASW5wdXQoKSBzZXQgYmF0Y2hUZXh0ICh2YWx1ZTogc3RyaW5nIHwgeyBTSU5HTEU6IHN0cmluZywgTVVMVElQTEU6IHN0cmluZyB9KSB7XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0dGhpcy5fYmF0Y2hUZXh0U2luZ2xlLm92ZXJyaWRlKHZhbHVlLlNJTkdMRSk7XG5cdFx0XHR0aGlzLl9iYXRjaFRleHRNdWx0aXBsZS5vdmVycmlkZSh2YWx1ZS5NVUxUSVBMRSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZvciBjb21wYXRpYmlsaXR5IHdpdGggb2xkIGNvZGVcblx0XHRcdHRoaXMuX2JhdGNoVGV4dExlZ2FjeS5vdmVycmlkZSh2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cdEBJbnB1dCgpIHNldCBhcmlhTGFiZWwgKHZhbHVlOiB7IEFDVElPTl9CQVI6IHN0cmluZyB9KSB7XG5cdFx0dGhpcy5hY3Rpb25CYXJMYWJlbC5vdmVycmlkZSh2YWx1ZS5BQ1RJT05fQkFSKTtcblx0fVxuXHRASW5wdXQoKSBzZXQgY2FuY2VsVGV4dCh2YWx1ZTogeyBDQU5DRUw6IHN0cmluZyB9KSB7XG5cdFx0dGhpcy5fY2FuY2VsVGV4dC5vdmVycmlkZSh2YWx1ZS5DQU5DRUwpO1xuXHR9XG5cdEBJbnB1dCgpIHNpemU6IFRhYmxlUm93U2l6ZSA9IFwibWRcIjtcblxuXHRnZXQgY2FuY2VsVGV4dCgpOiB7IENBTkNFTDogc3RyaW5nIH0ge1xuXHRcdHJldHVybiB7IENBTkNFTDogdGhpcy5fY2FuY2VsVGV4dC52YWx1ZSBhcyBzdHJpbmcgfTtcblx0fVxuXG5cdEBPdXRwdXQoKSBjYW5jZWwgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cblx0YWN0aW9uQmFyTGFiZWw6IE92ZXJyaWRhYmxlID0gdGhpcy5pMThuLmdldE92ZXJyaWRhYmxlKFwiVEFCTEVfVE9PTEJBUi5BQ1RJT05fQkFSXCIpO1xuXHRfY2FuY2VsVGV4dDogT3ZlcnJpZGFibGUgPSB0aGlzLmkxOG4uZ2V0T3ZlcnJpZGFibGUoXCJUQUJMRV9UT09MQkFSLkNBTkNFTFwiKTtcblx0X2JhdGNoVGV4dExlZ2FjeTogT3ZlcnJpZGFibGUgPSB0aGlzLmkxOG4uZ2V0T3ZlcnJpZGFibGUoXCJUQUJMRV9UT09MQkFSLkJBVENIX1RFWFRcIik7XG5cdF9iYXRjaFRleHRTaW5nbGU6IE92ZXJyaWRhYmxlID0gdGhpcy5pMThuLmdldE92ZXJyaWRhYmxlKFwiVEFCTEVfVE9PTEJBUi5CQVRDSF9URVhUX1NJTkdMRVwiKTtcblx0X2JhdGNoVGV4dE11bHRpcGxlOiBPdmVycmlkYWJsZSA9IHRoaXMuaTE4bi5nZXRPdmVycmlkYWJsZShcIlRBQkxFX1RPT0xCQVIuQkFUQ0hfVEVYVF9NVUxUSVBMRVwiKTtcblxuXHRjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaTE4bjogSTE4bikge31cblxuXHRnZXQgY291bnQoKSB7XG5cdFx0cmV0dXJuIHRoaXMubW9kZWwudG90YWxEYXRhTGVuZ3RoID4gMCA/IHRoaXMubW9kZWwucm93c1NlbGVjdGVkLnJlZHVjZSgocHJldmlvdXMsIGN1cnJlbnQpID0+IHByZXZpb3VzICsgKGN1cnJlbnQgPyAxIDogMCksIDApIDogMDtcblx0fVxuXHRnZXQgc2VsZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMubW9kZWwudG90YWxEYXRhTGVuZ3RoID4gMCA/IHRoaXMubW9kZWwucm93c1NlbGVjdGVkLnNvbWUoaXRlbSA9PiBpdGVtKSA6IGZhbHNlO1xuXHR9XG5cblx0b25DYW5jZWwoKSB7XG5cdFx0dGhpcy5tb2RlbC5zZWxlY3RBbGwoZmFsc2UpO1xuXHRcdHRoaXMuY2FuY2VsLmVtaXQoKTtcblx0fVxufVxuIl19